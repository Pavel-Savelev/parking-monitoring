import React, { useCallback, useState } from 'react';
import { Link } from 'react-router-dom';
import styles from './AppHeader.module.css';
import Logo from '../../../../../public/images/icons/Logo.svg';
import { Input } from '@zlden/react-developer-burger-ui-components';
import { useTheme } from '../../../../app/providers/ThemeProvider';

interface NavigationItem {
  label: string;
  href: string;
  icon?: string;
}

export const AppHeader: React.FC = (): JSX.Element => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const { theme, toggleTheme } = useTheme();
  const getResolvedTheme = useCallback(() => {
    if (theme === 'auto') {
      return window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light';
    }
    return theme;
  }, [theme]);

  const isLightTheme = getResolvedTheme() === 'light';

  const MoonIcon = () => (
    <svg
      width='24'
      height='24'
      viewBox='0 0 24 24'
      fill='none'
      xmlns='http://www.w3.org/2000/svg'
    >
      <path
        d='M12.4255 22C12.2674 22 12.1092 22 11.9511 21.9907C6.74232 21.7582 2.38925 17.5632 2.02649 12.4474C1.71024 8.05715 4.24954 3.95522 8.34216 2.23446C9.50484 1.75078 10.1187 2.12284 10.3792 2.39258C10.6396 2.65302 11.0024 3.25762 10.5187 4.36449C10.0908 5.35044 9.8769 6.4015 9.8862 7.48047C9.90481 11.601 13.3277 15.0983 17.5041 15.2658C18.1087 15.2937 18.704 15.2472 19.2806 15.1448C20.5084 14.9216 21.02 15.4146 21.2153 15.7308C21.4107 16.0471 21.6339 16.7261 20.8898 17.7306C18.9179 20.4281 15.7833 22 12.4255 22ZM3.41241 12.3451C3.72866 16.7726 7.50504 20.4002 12.0069 20.5955C15.0671 20.7443 17.9691 19.3491 19.755 16.9121C19.8945 16.7168 19.9597 16.5773 19.9876 16.5029C19.9038 16.4936 19.755 16.4843 19.5225 16.5308C18.8435 16.6517 18.1366 16.6982 17.439 16.6703C12.5278 16.475 8.50959 12.3544 8.48169 7.49907C8.48169 6.21547 8.73283 4.97838 9.2444 3.8157C9.33742 3.61107 9.35602 3.47155 9.36532 3.39714C9.28161 3.39714 9.13279 3.41574 8.89095 3.51806C5.3471 5.00629 3.15197 8.55943 3.41241 12.3451Z'
        fill='var(--color-icon)'
      />
    </svg>
  );

  const SunIcon = () => (
    <svg
      width='24'
      height='24'
      viewBox='0 0 24 24'
      fill='none'
      xmlns='http://www.w3.org/2000/svg'
    >
      <path
        d='M12.0184 18.6211C8.37545 18.6211 5.41553 15.6612 5.41553 12.0182C5.41553 8.37523 8.37545 5.4153 12.0184 5.4153C15.6614 5.4153 18.6214 8.37523 18.6214 12.0182C18.6214 15.6612 15.6614 18.6211 12.0184 18.6211ZM12.0184 6.78142C9.13137 6.78142 6.78165 9.13115 6.78165 12.0182C6.78165 14.9053 9.13137 17.255 12.0184 17.255C14.9055 17.255 17.2552 14.9053 17.2552 12.0182C17.2552 9.13115 14.9055 6.78142 12.0184 6.78142Z'
        fill='var(--color-icon)'
      />
      <path
        d='M12.0182 22C11.5173 22 11.1075 21.6266 11.1075 21.1257V21.0528C11.1075 20.5519 11.5173 20.1421 12.0182 20.1421C12.5191 20.1421 12.929 20.5519 12.929 21.0528C12.929 21.5537 12.5191 22 12.0182 22ZM18.5209 19.4317C18.2842 19.4317 18.0565 19.3406 17.8743 19.1676L17.7559 19.0492C17.4007 18.694 17.4007 18.1202 17.7559 17.765C18.1111 17.4098 18.6849 17.4098 19.0401 17.765L19.1585 17.8834C19.5137 18.2386 19.5137 18.8124 19.1585 19.1676C18.9854 19.3406 18.7577 19.4317 18.5209 19.4317ZM5.51548 19.4317C5.27869 19.4317 5.051 19.3406 4.86885 19.1676C4.51366 18.8124 4.51366 18.2386 4.86885 17.8834L4.98725 17.765C5.34244 17.4098 5.91621 17.4098 6.2714 17.765C6.62659 18.1202 6.62659 18.694 6.2714 19.0492L6.15301 19.1676C5.97996 19.3406 5.74317 19.4317 5.51548 19.4317ZM21.1257 12.929H21.0528C20.5519 12.929 20.1421 12.5191 20.1421 12.0182C20.1421 11.5173 20.5519 11.1075 21.0528 11.1075C21.5537 11.1075 22 11.5173 22 12.0182C22 12.5191 21.6266 12.929 21.1257 12.929ZM2.98361 12.929H2.91075C2.40984 12.929 2 12.5191 2 12.0182C2 11.5173 2.40984 11.1075 2.91075 11.1075C3.41166 11.1075 3.85792 11.5173 3.85792 12.0182C3.85792 12.5191 3.48452 12.929 2.98361 12.929ZM18.4026 6.54463C18.1658 6.54463 17.9381 6.45355 17.7559 6.28051C17.4007 5.92532 17.4007 5.35155 17.7559 4.99636L17.8743 4.87796C18.2295 4.52277 18.8033 4.52277 19.1585 4.87796C19.5137 5.23315 19.5137 5.80692 19.1585 6.16211L19.0401 6.28051C18.867 6.45355 18.6393 6.54463 18.4026 6.54463ZM5.63388 6.54463C5.39709 6.54463 5.1694 6.45355 4.98725 6.28051L4.86885 6.15301C4.51366 5.79781 4.51366 5.22404 4.86885 4.86885C5.22404 4.51366 5.79781 4.51366 6.15301 4.86885L6.2714 4.98725C6.62659 5.34244 6.62659 5.91621 6.2714 6.2714C6.09836 6.45355 5.86157 6.54463 5.63388 6.54463ZM12.0182 3.85792C11.5173 3.85792 11.1075 3.48452 11.1075 2.98361V2.91075C11.1075 2.40984 11.5173 2 12.0182 2C12.5191 2 12.929 2.40984 12.929 2.91075C12.929 3.41166 12.5191 3.85792 12.0182 3.85792Z'
        fill='var(--color-icon)'
      />
    </svg>
  );

  const navigationItems: NavigationItem[] = [
    { label: 'Главная', href: '/' },
    { label: 'О нас', href: '/about' },
    { label: 'Контакты', href: '/contact' }
  ];

  return (
    <header className={styles.app_header}>
      <div className={styles.app_header_container}>
        <img src={Logo} alt='Logo' className={styles.logo} />
        {/* <input type='text' className={styles.input} /> */}
        <nav className={styles.app_nav}>
          <button className={styles.themeToggleButton} onClick={toggleTheme}>
            {isLightTheme ? <MoonIcon /> : <SunIcon />}
          </button>
          {navigationItems.map((item) => (
            <Link key={item.href} to={item.href} className={styles.navLink}>
              {item.icon && <span>{item.icon}</span>}
              {item.label}
            </Link>
          ))}
        </nav>
      </div>
    </header>
  );
};
